function closeConversation(){window.ConversationalForm.remove();$('#form-overlay').removeClass('is-active')}
function call_count(call_url){$.get(call_url+'&return=count',function(data){return parseInt(data)});}
function redirectToSearch(call_url,difficult){if(difficult){window.ConversationalForm.addRobotChatResponse("Phew, I had some issues finding someone there that fits, but I got some now! Take look, redirecting....");}else{window.ConversationalForm.addRobotChatResponse("Found some people that should suit you! Redirecting now....");}
window.setTimeout(function(){window.location.href=call_url;},2000)}
function openConversation(){$("#conversation").conversationalForm({'theme':'dark','showProgressBar':true,'robotImage':'https://cdn.mentorcruise.com/img/mc_green.png',submitCallback:function(){window.ConversationalForm.addRobotChatResponse("Alright, let me see what I can do for you...");var data=window.ConversationalForm.getFormData(true);if(data['engagement'][0]=='super'||data['engagement'][0]=='short'){window.setTimeout(function(){window.ConversationalForm.addRobotChatResponse("With your timeline in mind, I think it would be better for you to book a session, instead of looking for a longterm mentor. Redirecting you now...");window.setTimeout(function(){window.location.href='https://mentorcruise.com/sessions/';},4000)},2500)}else{window.setTimeout(function(){var browse_url='https://mentorcruise.com/mentor/browse/?ref=assistant';var tagsearch='&tagsearch='+data['tagsearch'][0];var search='&search='+data['search'].join('%2C');var price='&price__lt='+data['price__lt'];var services='';if(parseInt(data['services'].indexOf('todo'))!==-1){services+='&config__goals=1'}
if(parseInt(data['services'].indexOf('call'))!==-1){services+='&config__one_on_one=1'}
if(parseInt(data['services'].indexOf('projects'))!==-1){services+='&config__challenge=1'}
if(parseInt(data['services'].indexOf('hands-on'))!==-1){services+='&config__coding_support=1'}
var call_url=browse_url+tagsearch+search+price+services;if(call_count(call_url)<2){price='&price__lt='+parseInt(data['price__lt'])*1.5;call_url=browse_url+tagsearch+search+price+services;if(call_count(call_url)<2){search='&search='+data['search'].slice(0,Math.ceil(data['search'].length/2)).join('%2C');call_url=browse_url+tagsearch+search+price+services;if(call_count(call_url)<2){price='&price__lt=';call_url=browse_url+tagsearch+search+price+services;if(call_count(call_url)<2){search='&search=';call_url=browse_url+tagsearch+search+price+services;if(call_count(call_url)<2){window.ConversationalForm.addRobotChatResponse("How embarassing... I really can't find anybody who fits your criteria. Could you try again?");}else{redirectToSearch(call_url,true)}}else{redirectToSearch(call_url,true)}}else{redirectToSearch(call_url,false)}}else{redirectToSearch(call_url,false)}}else{redirectToSearch(call_url,false)}},2500)}}});$('#form-overlay').addClass('is-active');$('#conversational-form').on('click',function(evt){if(evt.target.className=="conversational-form conversational-form--enable-animation conversational-form--show"){closeConversation()}})}